<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Primary Meta Tags -->
    <title>Tebar Undangan Generator - Buat Undangan Digital Tia & Zaid</title>
    <meta name="title" content="Tebar Undangan Generator - Buat Undangan Digital Tia & Zaid">
    <meta name="description" content="Aplikasi web modern untuk membuat undangan digital pernikahan Tia & Zaid dengan mudah. Generator otomatis, copy to clipboard, responsive design, dan user-friendly interface.">
    <meta name="keywords" content="generator undangan, undangan digital, undangan pernikahan, Tia Zaid, wedding invitation, undangan online, generator pesan WhatsApp, undangan gratis">
    <meta name="author" content="Kamtis Family">
    <meta name="robots" content="index, follow">
    <meta name="language" content="Indonesian">
    <meta name="revisit-after" content="7 days">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://tia-zaid.github.io/UndanganPernikahan/">
    <meta property="og:title" content="Tebar Undangan Generator - Buat Undangan Digital Tia & Zaid">
    <meta property="og:description" content="Aplikasi web modern untuk membuat undangan digital pernikahan dengan mudah. Fitur generator otomatis, copy to clipboard, responsive design yang user-friendly.">
    <meta property="og:image" content="https://tia-zaid.github.io/UndanganPernikahan/assets/preview-image.jpg">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:image:alt" content="Preview Generator Undangan Digital Tia & Zaid">
    <meta property="og:site_name" content="Tebar Undangan Generator">
    <meta property="og:locale" content="id_ID">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://tia-zaid.github.io/UndanganPernikahan/">
    <meta property="twitter:title" content="Tebar Undangan Generator - Buat Undangan Digital Tia & Zaid">
    <meta property="twitter:description" content="Aplikasi web modern untuk membuat undangan digital pernikahan dengan mudah. Generator otomatis, copy to clipboard, responsive design yang user-friendly.">
    <meta property="twitter:image" content="https://tia-zaid.github.io/UndanganPernikahan/assets/preview-image.jpg">
    <meta property="twitter:image:alt" content="Preview Generator Undangan Digital Tia & Zaid">
    <meta property="twitter:creator" content="@KamtisFamily">
    <meta property="twitter:site" content="@KamtisFamily">
    
    <!-- Additional Meta Tags -->
    <meta name="theme-color" content="#667eea">
    <meta name="msapplication-TileColor" content="#667eea">
    <meta name="msapplication-config" content="/browserconfig.xml">
    
    <!-- Structured Data / JSON-LD -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "Tebar Undangan Generator",
        "alternateName": "Generator Undangan Digital Tia & Zaid",
        "description": "Aplikasi web modern untuk membuat undangan digital pernikahan dengan mudah. Fitur generator otomatis, copy to clipboard, responsive design yang user-friendly.",
        "url": "https://tia-zaid.github.io/WeddingInvitation/",
        "applicationCategory": "Utility",
        "operatingSystem": "Web Browser",
        "browserRequirements": "Requires JavaScript",
        "author": {
            "@type": "Organization",
            "name": "Kamtis Family"
        },
        "creator": {
            "@type": "Organization",
            "name": "Kamtis Family"
        },
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "IDR",
            "availability": "https://schema.org/InStock"
        },
        "featureList": [
            "Interface yang User-Friendly",
            "Generator Undangan Otomatis", 
            "Copy to Clipboard",
            "Responsive Design",
            "Fast & Lightweight",
            "Personalisasi Nama Penerima",
            "Link Undangan Kustomisasi",
            "Integrasi WhatsApp"
        ],
        "screenshot": "https://tia-zaid.github.io/WeddingInvitation/assets/screenshot.jpg",
        "softwareVersion": "1.0",
        "datePublished": "2024-01-01",
        "dateModified": "2024-01-01",
        "inLanguage": "id-ID",
        "isAccessibleForFree": true
    }
    </script>
    
    <!-- Preconnect untuk optimasi loading -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://tia-zaid.github.io/UndanganPernikahan/">
    
    <!-- Hreflang untuk multi-bahasa (jika ada) -->
    <link rel="alternate" hreflang="id" href="https://tia-zaid.github.io/UndanganPernikahan/">
    <link rel="alternate" hreflang="x-default" href="https://tia-zaid.github.io/UndanganPernikahan/">
    <title>Generator Undangan Pernikahan - Tia & Zaid</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            max-width: 700px;
            width: 100%;
            margin-bottom: 20px;
        }

        .header {
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%);
            padding: 30px;
            text-align: center;
            color: #333;
        }

        .header h1 {
            font-size: 28px;
            margin-bottom: 10px;
            font-weight: 300;
        }

        .header p {
            opacity: 0.8;
            font-size: 16px;
        }

        .couple-info {
            background: #f8f9fa;
            padding: 20px;
            margin: 20px;
            border-radius: 15px;
            border-left: 4px solid #667eea;
        }

        .couple-info h3 {
            color: #667eea;
            margin-bottom: 15px;
            text-align: center;
        }

        .couple-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 15px;
        }

        .bride, .groom {
            text-align: center;
            padding: 15px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }

        .bride h4, .groom h4 {
            color: #333;
            margin-bottom: 8px;
            font-size: 16px;
        }

        .parents {
            font-size: 12px;
            color: #666;
            line-height: 1.4;
        }

        .form-section {
            padding: 30px;
        }

        .form-group {
            margin-bottom: 25px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
            font-size: 14px;
        }

        input[type="text"], textarea {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e1e5e9;
            border-radius: 10px;
            font-size: 16px;
            transition: all 0.3s ease;
            background: #f8f9fa;
        }

        input[type="text"]:focus, textarea:focus {
            outline: none;
            border-color: #667eea;
            background: white;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 14px 30px;
            border-radius: 10px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            font-weight: 600;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }

        .result-section {
            margin-top: 30px;
            padding: 25px;
            background: #f8f9fa;
            border-radius: 15px;
            border: 2px dashed #dee2e6;
            display: none;
        }

        .result-section.show {
            display: block;
            animation: slideIn 0.5s ease;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .message-preview {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 4px solid #667eea;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            max-height: 400px;
            overflow-y: auto;
        }

        .message-preview h3 {
            color: #333;
            margin-bottom: 15px;
            font-size: 18px;
        }

        .message-text {
            line-height: 1.6;
            color: #555;
            font-size: 14px;
            white-space: pre-wrap;
            direction: ltr;
        }

        .arabic-text {
            font-size: 16px;
            text-align: center;
            color: #667eea;
            font-weight: bold;
            margin: 10px 0;
            direction: rtl;
        }

        .action-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .btn-secondary {
            background: #25d366;
            flex: 1;
            min-width: 120px;
        }

        .btn-secondary:hover {
            background: #128c7e;
        }

        .btn-copy {
            background: #6c757d;
            flex: 1;
            min-width: 120px;
        }

        .btn-copy:hover {
            background: #5a6268;
        }

        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #28a745;
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            z-index: 1000;
            display: none;
            animation: toast-slide 0.3s ease;
        }

        @keyframes toast-slide {
            from {
                transform: translateX(100%);
            }
            to {
                transform: translateX(0);
            }
        }

        .phone-input {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .country-code {
            background: #667eea;
            color: white;
            padding: 12px 16px;
            border-radius: 10px;
            font-weight: bold;
            min-width: 60px;
            text-align: center;
        }

        .debug-info {
            background: #e9ecef;
            padding: 10px;
            border-radius: 8px;
            font-size: 12px;
            color: #495057;
            margin-top: 10px;
            display: none;
        }

        /* Footer Styles */
        .footer {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            text-align: center;
            color: #333;
            font-size: 14px;
            font-weight: 500;
            margin-top: 20px;
            max-width: 700px;
            width: 100%;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .footer .heart {
            color: #ff6b6b;
            font-size: 16px;
            display: inline-block;
            animation: heartbeat 1.5s ease-in-out infinite;
        }

        .footer .family-name {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: 600;
            font-size: 15px;
        }

        @keyframes heartbeat {
            0%, 50%, 100% {
                transform: scale(1);
            }
            25%, 75% {
                transform: scale(1.1);
            }
        }

        /* Hover effect untuk footer */
        .footer:hover .heart {
            animation-duration: 0.5s;
        }

        @media (max-width: 768px) {
            .couple-details {
                grid-template-columns: 1fr;
            }
            
            .action-buttons {
                flex-direction: column;
            }
            
            .btn-secondary, .btn-copy {
                min-width: auto;
            }

            .footer {
                margin-top: 15px;
                padding: 15px;
                font-size: 13px;
            }

            .footer .family-name {
                font-size: 14px;
            }
        }

        /* Responsive untuk layar kecil */
        @media (max-width: 480px) {
            body {
                padding: 15px;
            }

            .container {
                margin-bottom: 15px;
            }

            .footer {
                margin-top: 10px;
                padding: 12px;
                border-radius: 12px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üíå Generator Undangan Pernikahan</h1>
            <p>Tia & Zaid Wedding Invitation</p>
        </div>

        <div class="couple-info">
            <h3>üë∞üèª‚Äç‚ôÄÔ∏è Informasi Mempelai ü§µüèª‚Äç‚ôÇÔ∏è</h3>
            <div class="couple-details">
                <div class="bride">
                    <h4>üíñ Setia Angkasa S.Pi (Tia)</h4>
                    <div class="parents">
                        Putri dari:<br>
                        Bapak Ahmadin (Alm) &<br>
                        Ibu Almuaini
                    </div>
                </div>
                <div class="groom">
                    <h4>üíô Ahmad Ramadhan Zaid Al Khairi S.T (Zaid)</h4>
                    <div class="parents">
                        Putra dari:<br>
                        Bapak Sarbaini &<br>
                        Ibu Lilis Nawati
                    </div>
                </div>
            </div>
        </div>

        <div class="form-section">
            <form id="invitationForm">
                <div class="form-group">
                    <label for="recipientName">üë§ Nama Penerima Undangan:</label>
                    <input type="text" id="recipientName" name="recipientName" placeholder="Masukkan nama lengkap tamu undangan" required>
                </div>

                <div class="form-group">
                    <label for="phoneNumber">üì± Nomor WhatsApp (Opsional):</label>
                    <div class="phone-input">
                        <div class="country-code">+62</div>
                        <input type="text" id="phoneNumber" name="phoneNumber" placeholder="81234567890" pattern="[0-9]*">
                    </div>
                    <small style="color: #666; font-size: 12px; margin-top: 5px; display: block;">
                        Kosongkan jika ingin copy pesan saja
                    </small>
                </div>

                <button type="submit" class="btn">üéâ Buat Pesan Undangan</button>
            </form>

            <div id="resultSection" class="result-section">
                <div class="message-preview">
                    <h3>üì± Preview Pesan WhatsApp:</h3>
                    <div id="messagePreview" class="message-text"></div>
                </div>
                
                <div class="action-buttons">
                    <button id="sendWhatsApp" class="btn btn-secondary">üì± Kirim via WhatsApp</button>
                    <button id="copyMessage" class="btn btn-copy">üìã Copy Pesan</button>
                </div>

                <div id="debugInfo" class="debug-info">
                    <strong>Debug Info:</strong><br>
                    <span id="debugText"></span>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div>
            Dibuat dengan <span class="heart">‚ù§Ô∏è</span> <span class="family-name">Kamtis Family</span>
        </div>
    </footer>

    <div id="toast" class="toast">Pesan berhasil disalin!</div>

    <script>
        class WeddingInvitationGenerator {
            constructor() {
                this.form = document.getElementById('invitationForm');
                this.resultSection = document.getElementById('resultSection');
                this.messagePreview = document.getElementById('messagePreview');
                this.sendWhatsAppBtn = document.getElementById('sendWhatsApp');
                this.copyMessageBtn = document.getElementById('copyMessage');
                this.toast = document.getElementById('toast');
                this.debugInfo = document.getElementById('debugInfo');
                this.debugText = document.getElementById('debugText');
                
                this.currentMessage = '';
                this.currentPhone = '';
                this.recipientName = '';
                
                // Data tetap mempelai
                this.weddingData = {
                    brideName: 'Setia Angkasa S.Pi.',
                    brideNickname: 'Tia',
                    brideParents: 'Bapak Ahmadin (Alm) & Ibu Almuaini',
                    groomName: 'Ahmad Ramadhan Zaid Al Khairi S.T.',
                    groomNickname: 'Zaid',
                    groomParents: 'Bapak Sarbaini,¬†A.Md. & Ibu Lilisnawati',
                    invitationLink: 'https://tia-zaid.github.io/WeddingInvitation/'
                };
                
                this.init();
            }

            init() {
                this.form.addEventListener('submit', (e) => this.handleSubmit(e));
                this.sendWhatsAppBtn.addEventListener('click', () => this.sendToWhatsApp());
                this.copyMessageBtn.addEventListener('click', () => this.copyToClipboard());
                
                // Format nomor telepon saat mengetik
                document.getElementById('phoneNumber').addEventListener('input', this.formatPhoneNumber);
            }

            formatPhoneNumber(e) {
                let value = e.target.value.replace(/\D/g, ''); // Hapus karakter non-digit
                
                // Jika diawali dengan 0, ganti dengan 8
                if (value.startsWith('0')) {
                    value = '8' + value.substring(1);
                }
                
                e.target.value = value;
            }

            handleSubmit(e) {
                e.preventDefault();
                
                const formData = new FormData(this.form);
                const data = Object.fromEntries(formData.entries());
                
                this.generateMessage(data);
                this.showResult();
            }

            generateMessage(data) {
                const { recipientName, phoneNumber } = data;
                const { brideName, brideNickname, brideParents, groomName, groomNickname, groomParents, invitationLink } = this.weddingData;
                
                // Simpan nama penerima tanpa encoding dulu
                this.recipientName = recipientName.trim();
                
                // Buat link dengan nama penerima (encoding hanya untuk URL parameter)
                const linkWithName = this.addNameToLink(invitationLink, this.recipientName);
                
                const arabicText = 'ÿ®Ÿêÿ≥ŸíŸÖŸê ÿßŸÑŸÑŸëŸ∞ŸáŸê ÿßŸÑÿ±ŸéŸëÿ≠ŸíŸÖŸ∞ŸÜŸê ÿßŸÑÿ±ŸéŸëÿ≠ŸêŸäŸíŸÖŸê';
                
                // Buat pesan tanpa encoding nama (nama tetap plain text dalam pesan)
                const message = `${arabicText}

*Assalamualaikum Warahmatullahi Wabarakatuh*

Dengan penuh rasa syukur dan kebahagiaan, kami mengundang *${this.recipientName}* yang kami hormati untuk menghadiri dan memberikan doa restu pada pernikahan putra-putri kami:

üë∞üèª‚Äç‚ôÄÔ∏è *${brideName}* _(${brideNickname})_
Putri dari ${brideParents}

ü§µüèª‚Äç‚ôÇÔ∏è *${groomName}* _(${groomNickname})_
Putra dari ${groomParents}

Merupakan kebahagiaan dan kehormatan bagi kami apabila *${this.recipientName}* berkenan hadir serta memberikan doa restu kepada kami berdua.

Karena keterbatasan jarak dan waktu tidak dapat mengirimkan undangan ini secara langsung, maka melalui undangan digital ini dapat menjadi pengganti undangan resmi sehingga tujuan kami tersampaikan.

üíå *Untuk Info Detail Acara, Lokasi, dan Waktu Lebih Lengkap bisa akses link undangan online:*

${linkWithName}

Atas perhatian dan doa restu dari *${this.recipientName}*, kami ucapkan terima kasih yang sebesar-besarnya.

*Wassalamualaikum Warahmatullahi Wabarakatuh*

ü§≤üèª _Mohon Doa Restu untuk Kelancaran Acara Kami_ ü§≤üèª

üíï *Keluarga Besar*
*${brideNickname} & ${groomNickname}* üíï`;

                this.currentMessage = message;
                this.currentPhone = phoneNumber ? `62${phoneNumber}` : '';
                
                // Render message dengan formatting HTML untuk preview
                this.renderMessagePreview(message, arabicText);
                
                // Show debug info
                this.showDebugInfo(linkWithName);
            }

            renderMessagePreview(message, arabicText) {
                // Split message dan format untuk tampilan HTML
                const parts = message.split(arabicText);
                const formattedMessage = parts.length > 1 
                    ? `<div class="arabic-text">${arabicText}</div>${parts[1]}`
                    : message;
                
                this.messagePreview.innerHTML = formattedMessage.replace(/\n/g, '<br>');
            }

            addNameToLink(originalLink, recipientName) {
                try {
                    const url = new URL(originalLink);
                    // Gunakan encodeURIComponent hanya untuk parameter URL
                    url.searchParams.set('to', recipientName); // URL constructor sudah handle encoding otomatis
                    url.searchParams.set('utm_source', 'whatsapp');
                    url.searchParams.set('utm_medium', 'invitation');
                    return url.toString();
                } catch (error) {
                    // Jika URL tidak valid, tambahkan parameter dengan cara manual
                    const separator = originalLink.includes('?') ? '&' : '?';
                    const encodedName = encodeURIComponent(recipientName);
                    return `${originalLink}${separator}to=${encodedName}&utm_source=whatsapp&utm_medium=invitation`;
                }
            }

            showDebugInfo(linkWithName) {
                // Tampilkan debug info untuk memverifikasi encoding
                const debugText = `
                Nama: "${this.recipientName}"
                Link: ${linkWithName}
                Encoding test: ${encodeURIComponent(this.recipientName)}
                `;
                this.debugText.innerHTML = debugText.replace(/\n/g, '<br>');
                // Uncomment untuk debug: this.debugInfo.style.display = 'block';
            }

            showResult() {
                this.resultSection.classList.add('show');
                this.resultSection.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                
                // Update button text berdasarkan ada tidaknya nomor telepon
                if (this.currentPhone) {
                    this.sendWhatsAppBtn.innerHTML = 'üì± Kirim ke WhatsApp';
                    this.sendWhatsAppBtn.style.display = 'block';
                } else {
                    this.sendWhatsAppBtn.innerHTML = 'üì± Buka WhatsApp';
                    this.sendWhatsAppBtn.style.display = 'block';
                }
            }

            sendToWhatsApp() {
                // Encode seluruh pesan hanya sekali untuk WhatsApp URL
                const encodedMessage = encodeURIComponent(this.currentMessage);
                let whatsappUrl;
                
                if (this.currentPhone) {
                    whatsappUrl = `https://wa.me/${this.currentPhone}?text=${encodedMessage}`;
                } else {
                    whatsappUrl = `https://wa.me/?text=${encodedMessage}`;
                }
                
                console.log('WhatsApp URL:', whatsappUrl); // Debug log
                window.open(whatsappUrl, '_blank');
            }

            async copyToClipboard() {
                try {
                    // Copy pesan mentah tanpa encoding
                    await navigator.clipboard.writeText(this.currentMessage);
                    this.showToast('Pesan berhasil disalin! üìã');
                } catch (error) {
                    // Fallback untuk browser yang tidak support clipboard API
                    this.fallbackCopyToClipboard(this.currentMessage);
                }
            }

            fallbackCopyToClipboard(text) {
                const textArea = document.createElement('textarea');
                textArea.value = text; // Gunakan teks mentah tanpa encoding
                textArea.style.position = 'fixed';
                textArea.style.left = '-999999px';
                textArea.style.top = '-999999px';
                document.body.appendChild(textArea);
                textArea.focus();
                textArea.select();
                
                try {
                    document.execCommand('copy');
                    this.showToast('Pesan berhasil disalin! üìã');
                } catch (error) {
                    this.showToast('Gagal menyalin pesan üòî', 'error');
                }
                
                document.body.removeChild(textArea);
            }

            showToast(message, type = 'success') {
                this.toast.textContent = message;
                this.toast.style.background = type === 'error' ? '#dc3545' : '#28a745';
                this.toast.style.display = 'block';
                
                setTimeout(() => {
                    this.toast.style.display = 'none';
                }, 3000);
            }
        }

        // Initialize the application
        document.addEventListener('DOMContentLoaded', () => {
            new WeddingInvitationGenerator();
        });

        // Form validation dengan feedback visual
        document.addEventListener('input', (e) => {
            if (e.target.matches('input[required]')) {
                if (e.target.value.trim() === '') {
                    e.target.style.borderColor = '#dc3545';
                } else {
                    e.target.style.borderColor = '#28a745';
                }
            }
        });

        // Auto-resize textarea jika ada
        document.addEventListener('input', (e) => {
            if (e.target.tagName === 'TEXTAREA') {
                e.target.style.height = 'auto';
                e.target.style.height = e.target.scrollHeight + 'px';
            }
        });
    </script>
</body>
</html>